
1. Orders -> Entries

Entry:
  time, symbol, timeframe, strategy, sl, tp, static_tags, result: win/loose

Order:
 entry, dynamic_tags, stake_usd, gain
 

2. EntryPlan

params:
 - start deposit
 - stake_usd / mode
 - costs
 - leverage
 - risk per trade
 
filter:
 - tags, strategies, symbols, timeframes, js_code
 
finplan->startEntry(entry);
finplan->closeEntry(entry);

В лайв режиме - просто старт/клосе ентри.
В режиме запроса статистики -
отсортировать по датам открытия закрытия и последовательно скормить



ПЛАН:
 - Как отличаются динамические тэги?
 - Написать tagger Simultanious entry
 - Написать прослойку для запроса списка ордерсов, которая пропускает ордерсы через
 фильтр на базе параметров + указанных тэгов + указанного кода JS.
 - Для интерфейса делаем по всем полям таймаут + запрос на сокеты
 - Для интерфейса так же оставляем код JS
 - Для интерфейса - шапку с фильтрами тэгов и JS скрипта - делаем отдельным компонентом
 и пропогандируем на все другие компоненты отчётов
 
 - в фильтр и сервер добавляем указание ставки фиксированной/процентной, процент вывода и прочие другие вещи



Класс OrdersRecalc:
-------------------

есть параметры дефолтные (ставка, нач. депозит, проценты, плечо, макс. риск) (из private.js ?)
есть список ордерсов из эмулятора
передаются параметры запроса (период, символ, таймфрейм, стратегия, тэги)


0. Депозит = парам.депозит (1000)

1. Прогоняем все заказы по списку:
 
 А. Пересчитываем Ставку входа (парам. статичное или процент депозита - из тэггера берем?)
 Б. Пересчитываем прибыль, убыток (gain)
 В. пересчитываем динамические тэги заказов
 
 Фильтруем заказы по параметрам запроса (период, символ, таймфрейм, стратегия, тэги)
 Меняем депозит соответственно тому, проходит ордер или нет.

выдаем список прошедших ордерсов и состояние допзита.





X. REPORT + Арбитраж

- Класс для фильтрации заказов по фильрам поиска (JS, tags array, strategy, symbol, timeframe, date_period)

Х. Фильтр ордерсов через группу фильтров
 - одновременные входы в символ, символ-тайм-фрейм, символ-стратегия-таймфрейм
 - фильтр по маржинколлу (рантайм, потому что стоимость сделки переменная)
 - фильр по одновременному риску с арбитражем (рантайм)
 - динамическая стоимость сделки, процент месячного изъятия
 Эмулятор должен давать все точки входа, а динамический фильтр фильтровать. Те же компоненты фильтров использовать в живых сделах


 
Х. Отображение в фронте релевантных к заказу данных на чарте.
 - Возможность включить/отключить любые доступные данные.
 - Автоматом включать отображение индикаторов от стратегии, которую мы открываем
 
Х. Показывать entries из отфильтрованного списка текущих ордерсов, подсвечивать текущий
 Orders показывать отдельным слоем на чартах (с началом и концом сделки)

Х. Арбитраж лишних заказов

Х. Красота ( TF.time -> TH.time )

X. На разных стратегиях = Протестировать входы в сделки через лимит ордер + частичное закрытие позиции + ракета

X. Стратегия ABC (+MACD +DIVERGENCE)


DBLBOTTOM: 6. If target takeProfit level crosses more powerfull (in sum) level, than entry - limit takeProfit

Х. Таг объема в киллодолларах


2. Добавить РИСК менеджмент фичу, протестировать ее
  - без арбитража - херня
  
2. Освобождение памяти 
 - Не хранить свечи в тикерах, отображать только через запрос к базе
 - Хранить кэндл дебаг отдельно (пока в памяти в обьекте VM), потом в майскуэль
 - Хранить ордерсы в базе


1. RISK MANAGEMENT. Не входить за "один раз" больше, чем на 2-5 % депозита.
Если входов одновременно больше - то устраивать арбитраж (по недавнему периоду)

   
3. Аварийное закрытие массовых движений (после реализации возможности прогнать pulse-1m)
 - После успешного исправления этой статегией июня 21 года и октября -
 попробовать фильрацию CU5 на эмуляторе - должно дать больше захдов и прибыль.


4. Сделать Стратегию Хоффмана
 - как считать 45 угол? - сделать индикатор
 - сделать в эмуляторе $io->limitOrder( orderOptions )


5. Сделать индиктатор DIVERGENCE
  (смотрим вершины hl_trend или extremum или фракталы вильямса - и смотрим есть ли на RSI вершине выше/ниже 30/70 и как соотносятся их высоты) 


6. Сделать RocketRider (TRAILING TAKE PROFIT), протестить с реальной ценой эмулированной 1м таймфреймом.
если попадание в 95%
 - тейк профит ставим в текущая цена + 3 высоты (original entry-take)
 - стоплос ставим на уровень - 2% от entry Price
 - включаем режим ракета
   - новый триггер ставим в 80%
   - новый тейк ставим в 50%


Х. Сделать фильтр MACD консолидация - не вступать в сделки если больше N свечей цена колеблется
около нуля (менее P процентов от максимума и минимума за последние M свечей)

X. Сделать в выдаче списка заказов (и статистики) - фильтр одновременного захода
в стратегию - (сделать это онлайн на стадии выдачи отчета)

Х. После того, как сделаю алгоритм секвенсирования и арбитража - прогнать текущую стратегию
CU5 в режиме - вход в каждую сделку + арбитраж

X. Научиться брать previous swing low/high как stopLoss

X. Стратегию 20 cross 50 ema  (https://youtu.be/dqtBilESo0A) Блин тут точка входа в середине свечи у него :(

X. ADX > 25 как фильтрация боковиков?
 
11. Поля свечей переделать на односимвольные заодно в бэке и фронте (экономия памяти)

13. Переделать mysql хранение свечей на односимвольные поля + в названии таблиц указывать кодовое имя источика (busdm)
 
15. Оптимизировать candle debug и flags snapshot.

17. Сделать тэггер по попаданию свечи входа хвостом или краем в уровень поддержки/сопротивления

4. Для всех стратегий сделать фильтр за последние пол-года, проверить его не первых пол-года?

5. Переделать BTC TREND на надежный
 - погонять заново годовую статистику по самому тренду
 
************************************************************************
УСПЕШНЫЙ ФИЛЬТР - ВЛИЯЕТ НА ПРОШЛОЕ, ЗА ПРЕДЕЛАМИ ОПРЕДЕЛЕНИЯ УСПЕШНОСТИ
************************************************************************

0. Тейк профит 1/3 на 50% протестировать

0. Вести заказы отдельно в OrdersReal и OrdersEmulator
 OrdersReal с базой данных работает и с событями с биржи,
 не со свечами из тикеров
 
0. Сделать коррекцию стоп лосса! (протестить с пульсом в 1м)
  - после достижения 50% переносить стоплосс в безубыток 
  - проверить это на полугоде 
  - после достижения 95% преносить тейк профит + 5%
  - Разобраться как работает Trailing Stop
  
1. Написать установщик стоплосов аварийный.
 - Если прокатил основной заказ - ставить real = Y все равно наряду с ошибкой установки тейков.
  ( вернуть обратно метод групповой установки )

3. Перевести все broker orderid на клиентские не цифровые (^[\.A-Z\:/a-z0-9_-]{1,36}$)


ИНТЕРФЕЙС

2. Изменение ставки, стопа и тейка перед отправкой
 - из графика
 - желательно графически что бы можactiveно было изменить лонг на шорт
   - изменить entryPrice - в этом случае заказ лимитный.

7. Показывать открытую свечу в графике


******* ПРОЧЕЕ

* Сделать даблботтом начало отсчета отдельным классом с каждой потенциальной точки
(потенциальная точка:
	а. в уровне требуемой силы закрывается или хвост
	б. экстремум (вместо hills использовать фрактал вильямса!)
)
 - вторая вершина может быть просто в том же уровне?
 - обязательно не в друом уровне?



4. Динамический TAKE_PROFIT 
    if price > 75% take_profit)  {
        stopLoss = Max( currentPrice - 1/2 x atr14, startPrice + commision )
  	takeProfit:  	
  		0. Закрытие под линией mac20
  		1. красная падающая звезда с хвостом в зоне сопровивления > 30
     		2. если пришла l_trend вершина в зоне с сопротивлением >= 40  (+ красная свеча текущая)
    		3. если наклон mac20 > 20 градусов, то закрытие под линией mac20
    } 
     	
?. Зубы Аллигатора к Фракталам Вильямса  
 
5.  СТРАТЕГИЯ 'rsimoment' ( https://www.youtube.com/watch?v=ZTIj7YDrQPo )
 - входить на моменте (rsi10 > 70)
 - Не делать новых сделок до касания свечи mac20

7. СТРАТЕГИЯ 'abctrend' ( https://www.youtube.com/watch?v=2UWmPFL5Dlw )
  - cкальпинговая минутная стратегия с учетом   MACD

8. Стохастический индикатор RSI [ https://www.youtube.com/watch?v=7Dliw0yjZLk( ]
[ https://www.investopedia.com/terms/s/stochrsi.asp ]

9. Найти осцилятор, который показывает уровень объема торгов, что бы робот
не торговал в периоды спада
 
Например: считать медианный уровень за последние сутки (для свечей меньше часа), для часовых неделю

=======================================
 
*. Изменение стратегии ДАБЛБОТТОМ:
  
 - Вход в ДАБЛБОТТОМ не после второго дна, а после ретеста шеи! 
 - Вход только, если ВЫСШИЙ таймфрейм в аптренде
 	(по -hl_trend или по ma_trend)	
 	- Написать ma_trend
 
 - Протестировать разные уровни хвостов для определение первого ДНА
   (сейчас отсечка возможно слишком лютая по длинне хвоста)
     

*. Нужен переключатель в чарте на другие таймфреймы (точка входа должна быть видна на всех)
 - соответственно входы должны быть видны на всех - значит отдельный слой (по ордерсам)
 - ширина от входа до выхода (курренттайм для активных)

  
======================

1. ПОКАЗЫВАТЬ вес уровеней на всех уровнях справа на экране, а не по таймфрейму 


4. В заказах показывать текущее состояние кошелька
  
 
2. Сделать в MysqlDB в районе ТАЧ подгрузку данных с последней свечи в базе до текущего момента (FAILSAFE)

 
3. Дебаг свечей с указаниями тренда высшего уровня?
    
5. В заказах показывать Причина выхода
 	- сколько продолжалось движение вверх после тейк профита ближайшие N свечей (ошибка тейк профита - слишком низко)
  

